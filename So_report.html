<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIP íˆ¬ìì ì¼ì¼ ë¶„ì„ ë³´ê³ ì„œ</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #ecf0f1;
            /* Cool grey background for professional look */
            color: #2c3e50;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background-color: white;
            padding: 50px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        /* Header Section */
        header {
            border-bottom: 4px solid #2c3e50;
            padding-bottom: 20px;
            margin-bottom: 40px;
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            font-size: 36px;
            margin: 0;
            letter-spacing: -1px;
        }

        .report-date {
            font-size: 18px;
            color: #7f8c8d;
            margin-top: 10px;
            font-weight: bold;
        }

        /* Section Styling */
        h2 {
            color: #2980b9;
            font-size: 26px;
            margin-top: 50px;
            margin-bottom: 20px;
            border-left: 6px solid #e74c3c;
            padding-left: 15px;
            background: linear-gradient(to right, #f9f9f9, #fff);
            padding-top: 5px;
            padding-bottom: 5px;
        }

        /* Executive Summary Box */
        .exec-summary {
            background-color: #2c3e50;
            color: white;
            padding: 25px;
            border-radius: 5px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 40px;
            border: 2px solid #34495e;
        }

        .exec-summary span {
            display: block;
            font-size: 24px;
            color: #f1c40f;
            /* Gold for emphasis */
            margin-top: 10px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 18px;
        }

        th,
        td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #bdc3c7;
        }

        th {
            background-color: #ecf0f1;
            color: #2c3e50;
            font-weight: 800;
        }

        .up {
            color: #c0392b;
            font-weight: bold;
        }

        /* Red for up */
        .down {
            color: #2980b9;
            font-weight: bold;
        }

        /* Blue for down */
        .neutral {
            color: #7f8c8d;
        }

        /* Action Plan Box */
        .action-plan {
            background-color: #fff3e0;
            /* Light orange */
            border: 2px solid #e67e22;
            padding: 30px;
            border-radius: 5px;
            font-size: 20px;
            font-weight: bold;
            color: #d35400;
        }

        .action-plan ul {
            list-style-type: none;
            padding: 0;
        }

        .action-plan li {
            margin-bottom: 15px;
            padding-left: 30px;
            position: relative;
        }

        .action-plan li::before {
            content: "âœ…";
            position: absolute;
            left: 0;
        }

        /* Risk Warning Footer */
        .footer-warning {
            margin-top: 60px;
            padding: 20px;
            background-color: #abb7b7;
            color: #2c3e50;
            font-size: 16px;
            text-align: center;
            border-radius: 5px;
            font-style: italic;
        }

        /* Metaphor Tip Box */
        .metaphor-box {
            background-color: #e8f6f3;
            border-left: 5px solid #1abc9c;
            padding: 15px;
            margin: 10px 0;
            font-size: 16px;
        }

        .note-item {
            background-color: white;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 4px;
            border-left: 4px solid #34495e;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            font-size: 14px;
        }

        .note-time {
            font-size: 11px;
            color: #7f8c8d;
            margin-bottom: 3px;
            display: block;
            font-weight: bold;
        }

        /* Real-time data animations */
        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.3;
            }
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .price-up {
            color: #e74c3c !important;
            animation: blink 0.5s;
        }

        .price-down {
            color: #3498db !important;
            animation: blink 0.5s;
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>VIP íˆ¬ì ì „ëµ ë³´ê³ ì„œ</h1>
            <div class="report-date" id="report-timestamp">
                ìƒì„± ì¼ì‹œ:
                <script>document.write(new Date().toLocaleString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'short', hour: '2-digit', minute: '2-digit' }));</script>
                | ë°ì´í„°: ì‹¤ì‹œê°„ ì—°ë™
            </div>
        </header>

        <!-- Analyst Input Section -->
        <div class="analyst-input-section"
            style="margin-bottom: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.15);">
            <h3
                style="margin: 0 0 15px 0; color: white; font-size: 22px; display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 28px;">ğŸ¯</span>
                <span>ì¶”ê°€ ì˜ê²¬ ì…ë ¥ (Report Override)</span>
            </h3>
            <div style="background: rgba(255,255,255,0.95); padding: 15px; border-radius: 8px;">
                <div style="display: flex; gap: 12px; align-items: stretch;">
                    <textarea id="note-input" rows="3"
                        style="flex: 1; padding: 12px; border: 2px solid #667eea; border-radius: 6px; font-size: 15px; resize: vertical;"
                        placeholder="ğŸ’¡ ë¶„ì„ ì˜ê²¬ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 'í˜„ì¬ ê³¼ì—´, ì¦‰ì‹œ ë§¤ë„', 'ì¶”ê°€ ìƒìŠ¹ ì—¬ë ¥, ì ê·¹ ë§¤ìˆ˜')&#10;&#10;ì…ë ¥ í›„ 'ë¶„ì„ ë°˜ì˜' í´ë¦­ ì‹œ ë³´ê³ ì„œ ì „ì²´ê°€ ê·€í•˜ì˜ ì˜ê²¬ì— ë§ì¶° ì¬ì‘ì„±ë©ë‹ˆë‹¤."></textarea>
                    <button id="add-note-btn"
                        style="width: 140px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 16px; box-shadow: 0 4px 10px rgba(102,126,234,0.3); transition: all 0.3s;"
                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 15px rgba(102,126,234,0.4)';"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 10px rgba(102,126,234,0.3)';">ë¶„ì„
                        ë°˜ì˜<br><span style="font-size: 12px; font-weight: normal;">Apply</span></button>
                </div>
                <div id="note-list" style="display: none;">
                    <!-- Notes saved but hidden -->
                </div>
            </div>
        </div>

        <!-- Real-Time Yahoo Finance Data -->
        <div class="live-market-section"
            style="margin-bottom: 30px; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); padding: 25px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.2);">
            <h2 style="margin: 0 0 20px 0; color: white; display: flex; align-items: center; gap: 10px;">
                <span
                    style="display: inline-block; width: 12px; height: 12px; background: #e74c3c; border-radius: 50%; animation: pulse 2s infinite;"></span>
                ì‹¤ì‹œê°„ ì‹œì¥ í˜„í™© (Yahoo Finance)
            </h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <!-- KOSPI Live -->
                <div id="kospi-live" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                    <div style="color: rgba(255,255,255,0.7); font-size: 14px; margin-bottom: 5px;">KOSPI (^KS11)</div>
                    <div style="font-size: 32px; font-weight: bold; color: white; margin-bottom: 10px;">ë¡œë”© ì¤‘...</div>
                    <div style="font-size: 14px; color: rgba(255,255,255,0.8);">ë³€ë™ë¥ : -</div>
                    <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 8px;">ê±°ë˜ëŸ‰: -</div>
                </div>

                <!-- KOSDAQ Live -->
                <div id="kosdaq-live" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                    <div style="color: rgba(255,255,255,0.7); font-size: 14px; margin-bottom: 5px;">KOSDAQ (^KQ11)</div>
                    <div style="font-size: 32px; font-weight: bold; color: white; margin-bottom: 10px;">ë¡œë”© ì¤‘...</div>
                    <div style="font-size: 14px; color: rgba(255,255,255,0.8);">ë³€ë™ë¥ : -</div>
                    <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 8px;">ê±°ë˜ëŸ‰: -</div>
                </div>
            </div>

            <div style="text-align: right; color: rgba(255,255,255,0.6); font-size: 12px;">
                ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="update-time">-</span> | 10ì´ˆë§ˆë‹¤ ìë™ ê°±ì‹ 
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="exec-summary">
            <div style="text-align: left;">
                <strong style="font-size: 1.3em;">[ì¢…í•© ê²°ë¡  - 2026.02.02 ì‹œì¥ ë¶„ì„]</strong><br><br>

                <span style="font-size: 1.1em; line-height: 1.8;">
                    <strong style="color: #f39c12;">âš ï¸ í˜„ì¬ ì‹œì¥ ì§„ë‹¨:</strong><br>
                    êµ­ë‚´ ì¦ì‹œëŠ” <strong>ê³¼ì—´ê¶Œ ì§„ì… ì§ì „ ë‹¨ê³„</strong>ì— ìˆìŠµë‹ˆë‹¤. KOSPIëŠ” ë‹¨ê¸° ê¸‰ë“± ì´í›„ ê¸°ìˆ ì  ì €í•­ì„ ì— ë„ë‹¬í•˜ì˜€ìœ¼ë©°, ë ˆë²„ë¦¬ì§€ ETFì˜ ê±°ë˜ëŸ‰ ê¸‰ì¦ì€ ê°œì¸
                    íˆ¬ììë“¤ì˜ ê³¼ë„í•œ ë‚™ê´€ë¡ ì„ ì‹œì‚¬í•©ë‹ˆë‹¤.
                </span><br><br>

                <strong style="color: #f1c40f;">ğŸ“Š í•µì‹¬ ë¦¬ìŠ¤í¬ ìš”ì¸:</strong><br>
                <span style="font-size: 1.05em; line-height: 1.7;">
                    â€¢ <strong>ë¯¸ ì—°ì¤€ ë§¤íŒŒ ì¸ì‚¬ ì§€ëª…</strong>ìœ¼ë¡œ ê¸ˆë¦¬ ì¸í•˜ ê¸°ëŒ€ í›„í‡´<br>
                    â€¢ <strong>ì›/ë‹¬ëŸ¬ 1,450ì›ì„ </strong> ê³ ì°©í™”ë¡œ ì™¸êµ­ì¸ ìˆ˜ê¸‰ ë¶€ë‹´<br>
                    â€¢ <strong>ê¸°ìˆ ì  ê³¼ì—´ ì‹ í˜¸</strong> (RSI 70 ê·¼ì ‘, ë³¼ë¦°ì €ë°´ë“œ ìƒë‹¨ ì´íƒˆ)
                </span><br><br>

                <strong style="color: #f1c40f;">ğŸ“ ì¦‰ê° ì‹¤í–‰ ì§€ì¹¨:</strong><br>
                <div
                    style="background: rgba(255,255,255,0.1); padding: 15px; margin-top: 10px; border-radius: 5px; border-left: 4px solid #f1c40f;">
                    <span style="font-size: 1.1em;">
                        1. <strong>í˜„ê¸ˆ ë¹„ì¤‘ 30% ì´ìƒ í™•ë³´</strong> (í•„ìˆ˜)<br>
                        2. <strong>ë ˆë²„ë¦¬ì§€ í¬ì§€ì…˜ ì ˆë°˜ ì´ìƒ ì²­ì‚°</strong> ê¶Œê³ <br>
                        3. <strong>ì†ì ˆë¼ì¸ -7% ì—„ìˆ˜</strong> (ì˜ˆì™¸ ì—†ìŒ)<br>
                        4. <strong>ì‹ ê·œ ë§¤ìˆ˜ ìì œ</strong>, ê¸°ì¡´ í¬ì§€ì…˜ ê´€ë¦¬ì— ì§‘ì¤‘
                    </span>
                </div>
            </div>
        </div>

        <!-- 1. Real-Time Market Dashboard -->
        <h2>1. ê¸€ë¡œë²Œ ë° êµ­ë‚´ ì¦ì‹œ í˜„í™© (ì‹¤ì‹œê°„)</h2>
        <!-- Ticker Tape -->
        <div class="tradingview-widget-container" style="height: 70px; margin-bottom: 20px;">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript"
                src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
                    {
                        "symbols": [
                            { "proName": "KRX:KOSPI", "title": "KOSPI" },
                            { "proName": "KRX:KOSDAQ", "title": "KOSDAQ" },
                            { "proName": "CME_MINI:NQ1!", "title": "Nasdaq 100 ì„ ë¬¼" },
                            { "proName": "FOREXCOM:SPXUSD", "title": "S&P 500" },
                            { "proName": "FX_IDC:USDKRW", "title": "ì›/ë‹¬ëŸ¬" }
                        ],
                            "showSymbolLogo": true,
                                "isTransparent": false,
                                    "displayMode": "adaptive",
                                        "colorTheme": "light",
                                            "locale": "kr"
                    }
                </script>
        </div>

        <!-- Mini Charts -->
        <div style="display: flex; gap: 10px; justify-content: space-between;">
            <!-- KODEX 200 Leverage -->
            <div style="flex: 1;">
                <div class="tradingview-widget-container">
                    <script type="text/javascript"
                        src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                            {
                                "symbol": "KRX:122630",
                                    "width": "100%",
                                        "height": 220,
                                            "locale": "kr",
                                                "dateRange": "12M",
                                                    "colorTheme": "light",
                                                        "isTransparent": false,
                                                            "autosize": false,
                                                                "largeChartUrl": ""
                            }
                        </script>
                </div>
                <p style="text-align: center; font-weight: bold; color: #2c3e50;">KODEX 200 ë ˆë²„ë¦¬ì§€</p>
            </div>
            <!-- KODEX KOSDAQ 150 Lev -->
            <div style="flex: 1;">
                <div class="tradingview-widget-container">
                    <script type="text/javascript"
                        src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                            {
                                "symbol": "KRX:233740",
                                    "width": "100%",
                                        "height": 220,
                                            "locale": "kr",
                                                "dateRange": "12M",
                                                    "colorTheme": "light",
                                                        "isTransparent": false,
                                                            "autosize": false,
                                                                "largeChartUrl": ""
                            }
                        </script>
                </div>
                <p style="text-align: center; font-weight: bold; color: #2c3e50;">KODEX ì½”ìŠ¤ë‹¥150 ë ˆë²„ë¦¬ì§€</p>
            </div>
        </div>

        <!-- 2. Market Dynamics -->
        <h2>2. ì‹œì¥ ë™ë ¥ ë° ë‰´ìŠ¤ ìš”ì•½ (Fact Check)</h2>
        <div style="background-color: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
            <p style="font-size: 16px; line-height: 1.8; color: #2c3e50;">
                <strong>ğŸ“Œ ì‹œì¥ ë¶„ì„ ìš”ì•½:</strong> 2ì›” ì´ˆ í˜„ì¬ êµ­ë‚´ ì¦ì‹œëŠ” ê°•ë ¥í•œ ìƒìŠ¹ ëª¨ë©˜í…€ê³¼ ë™ì‹œì— ì¡°ì • ì••ë ¥ì´ ê³µì¡´í•˜ëŠ” ë³µí•©ì  êµ­ë©´ì— ì§„ì…í•˜ì˜€ìŠµë‹ˆë‹¤.
                ë¯¸êµ­ì˜ í†µí™”ì •ì±… ë¶ˆí™•ì‹¤ì„±, ì›í™” ì•½ì„¸ ì§€ì†, ê·¸ë¦¬ê³  ì‹¤ë¬¼ ê²½ê¸°ì˜ ì ì§„ì  íšŒë³µì„¸ê°€ êµì°¨í•˜ë©° ë‹¨ê¸° ë³€ë™ì„± í™•ëŒ€ê°€ ì˜ˆìƒë©ë‹ˆë‹¤.
                íŠ¹íˆ ë ˆë²„ë¦¬ì§€ ìƒí’ˆ íˆ¬ììë“¤ì€ <strong>ìŒì˜ ë³µë¦¬ íš¨ê³¼</strong>ì™€ <strong>ê¸‰ê²©í•œ ì‹œì¥ ë°˜ì „ ë¦¬ìŠ¤í¬</strong>ë¥¼ ë°˜ë“œì‹œ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
            </p>
        </div>
        <table>
            <thead>
                <tr>
                    <th width="20%">êµ¬ë¶„/ì¼ì</th>
                    <th>í•µì‹¬ ë‚´ìš© ë° ì˜í–¥ ë¶„ì„ (ì¶œì²˜)</th>
                    <th width="15%">ì˜í–¥ë„</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>ë¯¸ ì—°ì¤€ ì´ìŠˆ</strong><br><small>26.01.30</small></td>
                    <td style="text-align: left;">
                        <strong>'ì¼€ë¹ˆ ì›Œì‹œ' ì˜ì¥ ì§€ëª…:</strong> íŠ¸ëŸ¼í”„ ëŒ€í†µë ¹ì´ ì°¨ê¸° ì—°ì¤€ ì˜ì¥ìœ¼ë¡œ ê³µì‹ ì§€ëª… í–ˆìŠµë‹ˆë‹¤.<br>
                        â†’ ë§¤íŒŒì (ê¸´ì¶•) ì„±í–¥ ì¸ë¬¼ë¡œ, ê¸ˆë¦¬ ì¸í•˜ ê¸°ëŒ€ê° ì¶•ì†Œ ë° ë‹¬ëŸ¬ ê°•ì„¸ ìœ ë°œ.<br>
                        <span style="color:#7f8c8d; font-size: 0.8em;">(ì¶œì²˜: CNBC, Truth Social)</span>
                    </td>
                    <td class="down">ë¶€ì •ì </td>
                </tr>
                <tr>
                    <td><strong>í™˜ìœ¨ ë™í–¥</strong><br><small>ì‹¤ì‹œê°„</small></td>
                    <td style="text-align: left;">
                        <strong>ì›/ë‹¬ëŸ¬ 1,450ì›ì„ :</strong> ì™¸êµ­ì¸ íˆ¬ììì—ê²Œ í™˜ì°¨ì† ìš°ë ¤ë¥¼ ì£¼ëŠ” ì‹¬ë¦¬ì  ì €í•­ì„ .<br>
                        â†’ ì™¸êµ­ì¸ ìˆœë§¤ìˆ˜ ì „í™˜ í™•ì¸ ì „ê¹Œì§€ ëŒ€í˜•ì£¼ ìƒìŠ¹ ì œí•œ.<br>
                        <span style="color:#7f8c8d; font-size: 0.8em;">(ì¶œì²˜: Investing.com)</span>
                    </td>
                    <td><span style="color: #e67e22; font-weight: bold;">ì£¼ì˜</span></td>
                </tr>
                <tr>
                    <td><strong>ì‹¤ë¬¼ ê²½ê¸°</strong><br><small>26.02.02</small></td>
                    <td style="text-align: left;">
                        <strong>í•œêµ­ ì œì¡° PMI í˜¸ì¡° (51.2):</strong> 5ê°œì›” ë§Œì— ìµœê³ ì¹˜ ê¸°ë¡, ê²½ê¸° ë°˜ë“± ì‹ í˜¸.<br>
                        â†’ ë°˜ë„ì²´ ë° ìˆ˜ì¶œ ê´€ë ¨ì£¼ í•˜ë°© ê²½ì§ì„± í™•ë³´ì— ê¸ì •ì .<br>
                        <span style="color:#7f8c8d; font-size: 0.8em;">(ì¶œì²˜: S&P Global)</span>
                    </td>
                    <td class="up">ê¸ì •ì </td>
                </tr>
                <tr>
                    <td><strong>ì›ìì¬ ê¸‰ë½</strong><br><small>26.01.31</small></td>
                    <td style="text-align: left;">
                        <strong>ê¸ˆê°’ ê¸‰ë½ (-11%):</strong> ë‹¨ê¸° ì°¨ìµ ì‹¤í˜„ ë° ê°•ë‹¬ëŸ¬ ì˜í–¥ìœ¼ë¡œ ì˜¨ìŠ¤ë‹¹ $4,745 ìˆ˜ì¤€ í•˜ë½.<br>
                        â†’ ìœ„í—˜ ìì‚°(ì£¼ì‹) ì„ í˜¸ ì‹¬ë¦¬ ì¬í™•ì¸ ê°€ëŠ¥ì„±.<br>
                        <span style="color:#7f8c8d; font-size: 0.8em;">(ì¶œì²˜: LA Times, GoldInvest)</span>
                    </td>
                    <td class="neutral">ì¤‘ë¦½</td>
                </tr>
            </tbody>
        </table>

        <!-- 3. Technical Analysis -->
        <h2>3. ê¸°ìˆ ì  ì§€í‘œ ë° ì‰¬ìš´ í•´ì„</h2>
        <div style="display: flex; gap: 20px; align-items: flex-start;">
            <!-- Gauge Widget -->
            <div style="width: 350px;">
                <div class="tradingview-widget-container">
                    <script type="text/javascript"
                        src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                            {
                                "interval": "1D",
                                    "width": 350,
                                        "isTransparent": false,
                                            "height": 350,
                                                "symbol": "KRX:KOSPI",
                                                    "showIntervalTabs": false,
                                                        "displayMode": "single",
                                                            "locale": "kr",
                                                                "colorTheme": "light"
                            }
                        </script>
                </div>
            </div>
            <!-- Explanation Table -->
            <div style="flex: 1;">
                <table>
                    <thead>
                        <tr>
                            <th>ì§€í‘œëª…</th>
                            <th>í˜„ì¬ ìƒíƒœ (ë¹„ìœ )</th>
                            <th>í•´ì„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>RSI</strong><br>(ìƒëŒ€ê°•ë„ì§€ìˆ˜)</td>
                            <td><span style="font-size: 24px;">ğŸŒ¡ï¸</span><br><strong>"ì—”ì§„ ê³¼ì—´"</strong> (70â†‘)</td>
                            <td>ë‹¨ê¸°ê°„ì— ë„ˆë¬´ ë¹¨ë¦¬ ë‹¬ë ¸ìŠµë‹ˆë‹¤. ì ì‹œ ì—”ì§„ì„ ì‹íˆëŠ”(ì¡°ì •) êµ¬ê°„ì´ í•„ì—°ì ì…ë‹ˆë‹¤.</td>
                        </tr>
                        <tr>
                            <td><strong>ë³¼ë¦°ì €ë°´ë“œ</strong></td>
                            <td><span style="font-size: 24px;">ğŸ“</span><br><strong>"ê³ ë¬´ì¤„ íŒ½íŒ½"</strong> (ìƒë‹¨)</td>
                            <td>ê³ ë¬´ì¤„ì„ ìµœëŒ€ë¡œ ë‹¹ê¸°ë©´ íŠ•ê²¨ ë‚˜ê°€ê±°ë‚˜ ëŠì–´ì§‘ë‹ˆë‹¤. ì¶”ê°€ ìƒìŠ¹ë³´ë‹¤ ë˜ëŒë¦¼ í™•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤.</td>
                        </tr>
                        <tr>
                            <td><strong>ì´ë™í‰ê· ì„ </strong></td>
                            <td><span style="font-size: 24px;">ğŸ¢</span><br><strong>"ì˜¤ë¥´ë§‰ê¸¸"</strong> (ì •ë°°ì—´)</td>
                            <td>ì•„ì§ ì¶”ì„¸ ìì²´ëŠ” ë¬´ë„ˆì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê¸‰ë½ ì‹œ 20ì¼ì„ (ìƒëª…ì„ ) ì§€ì§€ ì—¬ë¶€ê°€ ê´€ê±´ì…ë‹ˆë‹¤.</td>
                        </tr>
                    </tbody>
                </table>
                <div
                    style="margin-top: 20px; background-color: #fff9e6; padding: 15px; border-radius: 5px; border: 1px solid #f39c12;">
                    <strong style="color: #d35400; font-size: 16px;">ğŸ” ì§€í‘œ í™œìš© ê°€ì´ë“œ:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
                        <li><strong>RSI 70 ëŒíŒŒ ì‹œ:</strong> ì¶”ê°€ ë§¤ìˆ˜ë¥¼ <u>ì¦‰ì‹œ ì¤‘ë‹¨</u>í•˜ê³  ê¸°ì¡´ í¬ì§€ì…˜ì˜ 30% ì´ìƒ ìµì ˆ ì‹¤ì‹œ</li>
                        <li><strong>ë³¼ë¦°ì €ë°´ë“œ ìƒë‹¨ ì´íƒˆ:</strong> í†µê³„ì ìœ¼ë¡œ 3~5ì¼ ë‚´ ë˜ëŒë¦¼ í™•ë¥  70% ì´ìƒ, ë‹¨ê¸° ì°¨ìµì‹¤í˜„ íƒ€ì´ë°</li>
                        <li><strong>ì´ë™í‰ê· ì„  ì •ë°°ì—´ ìœ ì§€:</strong> ì¶”ì„¸ ìì²´ëŠ” ê±´ì¬í•˜ë¯€ë¡œ ê³¼ë„í•œ ê³µí¬ ë§¤ë„ëŠ” ì§€ì–‘, ë‹¤ë§Œ 20ì¼ì„  ì´íƒˆ ì‹œ <u>ì ˆë°˜ ì´ìƒ ë§¤ë„</u> í•„ìˆ˜
                        </li>
                        <li><strong>ì¢…í•© íŒë‹¨:</strong> í˜„ì¬ëŠ” ìƒìŠ¹ ì¶”ì„¸ ë§ê¸° ~ ì¡°ì • ì´ˆê¸° ì‚¬ì´ì˜ ì „í™˜ì . <strong>ìš•ì‹¬ë³´ë‹¤ëŠ” ë°©ì–´</strong>ê°€ ìš°ì„ </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 4. Portfolio & Action Plan -->
        <h2>4. í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ ë° ì•¡ì…˜ í”Œëœ</h2>

        <div class="metaphor-box">
            <strong>ğŸ’¡ íˆ¬ì ì¡°ì–¸ (ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°):</strong><br>
            "ë¹„ê°€ ì˜¬ ê²ƒ ê°™ìœ¼ë©´ ìš°ì‚°ì„ ë¯¸ë¦¬ ì¤€ë¹„í•˜ì‹­ì‹œì˜¤. ì§€ê¸ˆì€ í˜„ê¸ˆì´ë¼ëŠ” ìš°ì‚°ì„ ì±™ê¸¸ ë•Œì…ë‹ˆë‹¤."<br>
            <span style="font-size: 14px; color: #7f8c8d; margin-top: 5px; display: block;">
                â†’ ì‹œì¥ì´ ë¬´ë„ˆì§„ í›„ì—ëŠ” 'í˜„ê¸ˆ'ì„ í™•ë³´í•˜ê³  ì‹¶ì–´ë„ ê°€ê²©ì´ ê¸‰ë½í•˜ì—¬ ì†ì‹¤ì´ í™•ì •ë©ë‹ˆë‹¤.
                <strong>ë¯¸ë¦¬ ì¤€ë¹„</strong>í•˜ëŠ” ì‚¬ëŒë§Œì´ í­ë½ì¥ì—ì„œë„ ì‚´ì•„ë‚¨ì•„ ì¬ì§„ì… ê¸°íšŒë¥¼ ì¡ìŠµë‹ˆë‹¤.
            </span>
        </div>

        <table style="font-size: 20px; font-weight: bold;">
            <tr>
                <td style="background-color: #fce4ec; width: 30%;">ìˆ˜ì • í¬íŠ¸í´ë¦¬ì˜¤ ë¹„ì¤‘</td>
                <td style="text-align: left; padding-left: 30px;">
                    ğŸ”´ ì£¼ì‹(ETF): <strong>70%</strong><br>
                    ğŸ’° í˜„ê¸ˆ: <strong>30%</strong> (í•„ìˆ˜ í™•ë³´)
                    <div style="font-size: 14px; font-weight: normal; color: #7f8c8d; margin-top: 8px;">
                        <strong>â€» ë¹„ì¤‘ ì¡°ì • ê·¼ê±°:</strong> ê³¼ì—´ ì‹œê·¸ë„ ê°ì§€ â†’ ë°©ì–´ì  í¬ì§€ì…˜ ì „í™˜.
                        í˜„ê¸ˆ 30%ëŠ” <u>ê¸‰ë½ ì‹œ ì¬ë§¤ìˆ˜ ì—¬ë ¥</u> í™•ë³´ ë° <u>ì‹¬ë¦¬ì  ì•ˆì •ì„±</u> ì œê³µ.
                    </div>
                </td>
            </tr>
        </table>

        <div
            style="background-color: #e8f5e9; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #27ae60;">
            <strong style="color: #27ae60; font-size: 17px;">ğŸ“ˆ ë ˆë²„ë¦¬ì§€ ETF ìš´ìš© ì „ëµ (ìƒì„¸)</strong>
            <p style="font-size: 15px; line-height: 1.8; margin-top: 10px; color: #2c3e50;">
                â€¢ <strong>KODEX 200 ë ˆë²„ë¦¬ì§€:</strong> ëŒ€í˜•ì£¼ ì¤‘ì‹¬, ë³€ë™ì„± ìƒëŒ€ì  ë‚®ìŒ â†’ ì•ˆì •ì  ìˆ˜ìµ ì¶”êµ¬ ì‹œ ì í•©<br>
                â€¢ <strong>KODEX KOSDAQ150 ë ˆë²„ë¦¬ì§€:</strong> ê¸°ìˆ ì£¼ ì¤‘ì‹¬, ë³€ë™ì„± ë†’ìŒ â†’ ê³µê²©ì  ìˆ˜ìµ ì¶”êµ¬ ì‹œ ì í•©<br>
                â€¢ <strong>ì£¼ì˜ì‚¬í•­:</strong> ë‘ ìƒí’ˆ ëª¨ë‘ <u>ì¼ì¼ ìˆ˜ìµë¥  2ë°° ì¶”ì¢…</u> êµ¬ì¡°ë¡œ, <strong>3ì¼ ì´ìƒ ë³´ìœ  ì‹œ ë³µë¦¬ ì™œê³¡</strong> ë°œìƒ<br>
                â€¢ <strong>ê¶Œì¥ ë³´ìœ ê¸°ê°„:</strong> ìµœëŒ€ 5ì˜ì—…ì¼ ì´ë‚´, 7% ìˆ˜ìµ ë˜ëŠ” -7% ì†ì‹¤ ë„ë‹¬ ì‹œ <u>ë¬´ì¡°ê±´ ì²­ì‚°</u><br>
                â€¢ <strong>í˜„ì¬ ê¶Œê³ :</strong> ê¸°ì¡´ ë³´ìœ  ì¤‘ì´ë¼ë©´ 50% ìµì ˆ í›„ ë‚˜ë¨¸ì§€ëŠ” ì†ì ˆë¼ì¸ ì„¤ì •í•˜ì—¬ ê´€ë¦¬
            </p>
        </div>

        <div class="action-plan">
            [ì‹œë‚˜ë¦¬ì˜¤ë³„ ëŒ€ì‘ ë§¤ë‰´ì–¼]
            <ul>
                <li><strong>ğŸ”» ê°œë³„ ì¢…ëª© -7% í•˜ë½ ì‹œ:</strong><br>
                    &nbsp;&nbsp;&nbsp;â†’ ì´ìœ  ë¶ˆë¬¸ <strong>"ë¬»ì§€ë§ˆ ì ˆë°˜ ë§¤ë„"</strong> í•˜ì‹­ì‹œì˜¤. ì†ì‹¤ì„ ëŠì–´ë‚´ëŠ” ê²ƒì´ ê³ ìˆ˜ì˜ ì²« ê±¸ìŒì…ë‹ˆë‹¤.</li>
                <li><strong>ğŸ”» ê³„ì¢Œ ì „ì²´ -10% ì†ì‹¤ ì‹œ:</strong><br>
                    &nbsp;&nbsp;&nbsp;â†’ ì‹œì¥ì´ í‹€ë¦° ê²ƒì´ ì•„ë‹ˆë¼ ë‚´ê°€ í‹€ë¦° ê²ƒì…ë‹ˆë‹¤. <strong>ì „ëŸ‰ í˜„ê¸ˆí™”</strong> í›„ ì—¬í–‰ì„ ë‹¤ë…€ì˜¤ì‹­ì‹œì˜¤.</li>
                <li><strong>ğŸ”º ë‚´ì¼ 2% ì¶”ê°€ í•˜ë½ ì‹œ:</strong><br>
                    &nbsp;&nbsp;&nbsp;â†’ 'ì €ê°€ ë§¤ìˆ˜' ê¸°íšŒê°€ ì•„ë‹™ë‹ˆë‹¤. 'ë–¨ì–´ì§€ëŠ” ì¹¼ë‚ 'ì…ë‹ˆë‹¤. ë§¤ìˆ˜ ë²„íŠ¼ì—ì„œ ì†ì„ ë–¼ì‹­ì‹œì˜¤.</li>
            </ul>
        </div>

        <div class="footer-warning">
            âš ï¸ <strong>ë ˆë²„ë¦¬ì§€ì˜ í•¨ì •:</strong> ë ˆë²„ë¦¬ì§€ ìƒí’ˆì˜ 'ìŒì˜ ë³µë¦¬ íš¨ê³¼'ëŠ” <strong>"ê°€ë‘ë¹„ì— ì˜· ì –ëŠ” ê²ƒ"</strong>ê³¼ ê°™ìŠµë‹ˆë‹¤.
            íš¡ë³´ì¥ì—ì„œë„ ë‚´ ëˆì€ ë§¤ì¼ ì¡°ê¸ˆì”© ë…¹ì•„ ì—†ì–´ì§‘ë‹ˆë‹¤. ì¥ê¸° íˆ¬ìëŠ” ì ˆëŒ€ ê¸ˆë¬¼ì…ë‹ˆë‹¤.
        </div>

    </div>

    <script>
        // Enhanced Analyst Input Logic to Comprehensively Rewrite Report
        const noteList = document.getElementById('note-list');
        const noteInput = document.getElementById('note-input');
        const addBtn = document.getElementById('add-note-btn');
        const execSummaryBox = document.querySelector('.exec-summary');
        const actionPlanBox = document.querySelector('.action-plan');

        // Load notes from LocalStorage
        function loadNotes() {
            const notes = JSON.parse(localStorage.getItem('vip_investor_notes') || '[]');
            noteList.innerHTML = '';
            notes.forEach(note => {
                addNoteElement(note.text, note.time);
            });

            // Re-apply the latest note to the report view if it exists
            if (notes.length > 0) {
                updateReportView(notes[notes.length - 1].text);
            }
        }

        // Add Note to DOM
        function addNoteElement(text, time) {
            const div = document.createElement('div');
            div.className = 'note-item';
            div.innerHTML = `<span class="note-time">${time}</span>${text.replace(/\n/g, '<br>')}`;
            noteList.prepend(div);
        }

        // Comprehensive Report Rewrite based on Input
        function updateReportView(text) {
            const lowerText = text.toLowerCase();
            let sentiment = "neutral";
            let confidence = "ë³´í†µ";

            // Enhanced keyword analysis
            const bullishKeywords = ["ë§¤ìˆ˜", "ê¸ì •", "ìƒìŠ¹", "ê¸°íšŒ", "ëŒíŒŒ", "ê°•ì„¸", "ë°˜ë“±", "í˜¸ì¬", "ì¶”ì²œ"];
            const bearishKeywords = ["ë§¤ë„", "í˜„ê¸ˆ", "ìœ„í—˜", "í­ë½", "ê´€ë§", "ì¡°ì •", "í•˜ë½", "ì•…ì¬", "ê²½ê³„", "ì²­ì‚°"];

            const bullishCount = bullishKeywords.filter(k => text.includes(k)).length;
            const bearishCount = bearishKeywords.filter(k => text.includes(k)).length;

            if (bullishCount > bearishCount && bullishCount > 0) {
                sentiment = "bullish";
                confidence = bullishCount >= 2 ? "ê°•ë ¥" : "ë³´í†µ";
            } else if (bearishCount > bullishCount && bearishCount > 0) {
                sentiment = "bearish";
                confidence = bearishCount >= 2 ? "ê°•ë ¥" : "ë³´í†µ";
            }

            // === 1. REWRITE EXECUTIVE SUMMARY ===
            if (sentiment === "bearish") {
                execSummaryBox.innerHTML = `
                    <div style="text-align: left;">
                        <strong style="font-size: 1.2em;">[ê¸´ê¸‰ íˆ¬ì ì „ëµ ìˆ˜ì • - ${confidence} ìœ„í—˜ ì‹ í˜¸]</strong><br><br>
                        <span style="color: #fff; font-size: 1.1em;">â›” ë¶„ì„ê°€ ê¸´ê¸‰ ì˜ê²¬:</span><br>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; margin: 10px 0; border-radius: 5px; font-weight: normal;">
                            "${text}"
                        </div>
                        <strong style="color: #ffeb3b;">ğŸ“ ì¦‰ê° ì‹¤í–‰ ì§€ì¹¨:</strong><br>
                        â€¢ ëª¨ë“  ë ˆë²„ë¦¬ì§€ í¬ì§€ì…˜ <strong>50% ì´ìƒ ì¦‰ì‹œ ì²­ì‚°</strong>í•˜ì‹­ì‹œì˜¤<br>
                        â€¢ í˜„ê¸ˆ ë¹„ì¤‘ì„ <strong>ìµœì†Œ 50%</strong>ë¡œ ì¦ì•¡í•˜ì‹­ì‹œì˜¤<br>
                        â€¢ ì¶”ê°€ í•˜ë½ ì‹œ <strong>ì „ëŸ‰ í˜„ê¸ˆí™”</strong> ì¤€ë¹„ë¥¼ í•˜ì‹­ì‹œì˜¤
                    </div>
                `;
                execSummaryBox.style.backgroundColor = "#c0392b";
                execSummaryBox.style.border = "3px solid #e74c3c";

            } else if (sentiment === "bullish") {
                execSummaryBox.innerHTML = `
                    <div style="text-align: left;">
                        <strong style="font-size: 1.2em;">[ê¸´ê¸‰ íˆ¬ì ì „ëµ ìˆ˜ì • - ${confidence} ë§¤ìˆ˜ ê¸°íšŒ]</strong><br><br>
                        <span style="color: #fff; font-size: 1.1em;">ğŸš€ ë¶„ì„ê°€ ê¸´ê¸‰ ì˜ê²¬:</span><br>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; margin: 10px 0; border-radius: 5px; font-weight: normal;">
                            "${text}"
                        </div>
                        <strong style="color: #f1c40f;">ğŸ“ ì¦‰ê° ì‹¤í–‰ ì§€ì¹¨:</strong><br>
                        â€¢ í˜„ê¸ˆ ë¹„ì¤‘ì„ <strong>30% ìˆ˜ì¤€ìœ¼ë¡œ ì¡°ì •</strong>í•˜ê³  ì£¼ì‹ ë¹„ì¤‘ í™•ëŒ€<br>
                        â€¢ KODEX ë ˆë²„ë¦¬ì§€ ìƒí’ˆ <strong>ë¶„í•  ë§¤ìˆ˜</strong> ê²€í† <br>
                        â€¢ ë‹¨, ì†ì ˆë¼ì¸ <strong>-7% ì—„ìˆ˜</strong> (ìƒìŠ¹ì¥ì—ì„œë„ ë¦¬ìŠ¤í¬ ê´€ë¦¬ í•„ìˆ˜)
                    </div>
                `;
                execSummaryBox.style.backgroundColor = "#27ae60";
                execSummaryBox.style.border = "3px solid #2ecc71";

            } else {
                // Neutral - keep default detailed summary without adding analyst comment
                execSummaryBox.innerHTML = `
                    <div style="text-align: left;">
                        <strong style="font-size: 1.3em;">[ì¢…í•© ê²°ë¡  - 2026.02.02 ì‹œì¥ ë¶„ì„]</strong><br><br>
                        
                        <span style="font-size: 1.1em; line-height: 1.8;">
                            <strong style="color: #f39c12;">âš ï¸ í˜„ì¬ ì‹œì¥ ì§„ë‹¨:</strong><br>
                            êµ­ë‚´ ì¦ì‹œëŠ” <strong>ê³¼ì—´ê¶Œ ì§„ì… ì§ì „ ë‹¨ê³„</strong>ì— ìˆìŠµë‹ˆë‹¤. KOSPIëŠ” ë‹¨ê¸° ê¸‰ë“± ì´í›„ ê¸°ìˆ ì  ì €í•­ì„ ì— ë„ë‹¬í•˜ì˜€ìœ¼ë©°, ë ˆë²„ë¦¬ì§€ ETFì˜ ê±°ë˜ëŸ‰ ê¸‰ì¦ì€ ê°œì¸ íˆ¬ììë“¤ì˜ ê³¼ë„í•œ ë‚™ê´€ë¡ ì„ ì‹œì‚¬í•©ë‹ˆë‹¤.
                        </span><br><br>
                        
                        <strong style="color: #f1c40f;">ğŸ“Š í•µì‹¬ ë¦¬ìŠ¤í¬ ìš”ì¸:</strong><br>
                        <span style="font-size: 1.05em; line-height: 1.7;">
                            â€¢ <strong>ë¯¸ ì—°ì¤€ ë§¤íŒŒ ì¸ì‚¬ ì§€ëª…</strong>ìœ¼ë¡œ ê¸ˆë¦¬ ì¸í•˜ ê¸°ëŒ€ í›„í‡´<br>
                            â€¢ <strong>ì›/ë‹¬ëŸ¬ 1,450ì›ì„ </strong> ê³ ì°©í™”ë¡œ ì™¸êµ­ì¸ ìˆ˜ê¸‰ ë¶€ë‹´<br>
                            â€¢ <strong>ê¸°ìˆ ì  ê³¼ì—´ ì‹ í˜¸</strong> (RSI 70 ê·¼ì ‘, ë³¼ë¦°ì €ë°´ë“œ ìƒë‹¨ ì´íƒˆ)
                        </span><br><br>
                        
                        <strong style="color: #f1c40f;">ï¿½ ì¦‰ê° ì‹¤í–‰ ì§€ì¹¨:</strong><br>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; margin-top: 10px; border-radius: 5px; border-left: 4px solid #f1c40f;">
                            <span style="font-size: 1.1em;">
                                1. <strong>í˜„ê¸ˆ ë¹„ì¤‘ 30% ì´ìƒ í™•ë³´</strong> (í•„ìˆ˜)<br>
                                2. <strong>ë ˆë²„ë¦¬ì§€ í¬ì§€ì…˜ ì ˆë°˜ ì´ìƒ ì²­ì‚°</strong> ê¶Œê³ <br>
                                3. <strong>ì†ì ˆë¼ì¸ -7% ì—„ìˆ˜</strong> (ì˜ˆì™¸ ì—†ìŒ)<br>
                                4. <strong>ì‹ ê·œ ë§¤ìˆ˜ ìì œ</strong>, ê¸°ì¡´ í¬ì§€ì…˜ ê´€ë¦¬ì— ì§‘ì¤‘
                            </span>
                        </div>
                    </div>
                `;
                execSummaryBox.style.backgroundColor = "#2c3e50";
                execSummaryBox.style.border = "2px solid #34495e";
            }

            // === 2. REWRITE PORTFOLIO STRATEGY TABLE ===
            const portfolioTable = document.querySelector('table[style*="font-size: 20px"]');
            if (portfolioTable) {
                let stockRatio, cashRatio, rationale;

                if (sentiment === "bearish") {
                    stockRatio = confidence === "ê°•ë ¥" ? "30%" : "40%";
                    cashRatio = confidence === "ê°•ë ¥" ? "70%" : "60%";
                    rationale = "ì‹œì¥ ìœ„í—˜ ì¦ê°€ë¡œ ì¸í•œ ë°©ì–´ì  í¬ì§€ì…˜ ì „í™˜";
                } else if (sentiment === "bullish") {
                    stockRatio = confidence === "ê°•ë ¥" ? "80%" : "70%";
                    cashRatio = confidence === "ê°•ë ¥" ? "20%" : "30%";
                    rationale = "ìƒìŠ¹ ëª¨ë©˜í…€ í™•ì¸ìœ¼ë¡œ ê³µê²©ì  í¬ì§€ì…˜ ì „í™˜";
                } else {
                    stockRatio = "70%";
                    cashRatio = "30%";
                    rationale = "ì¤‘ë¦½ ì‹œì¥ ëŒ€ì‘ ê· í˜• í¬ì§€ì…˜ ìœ ì§€";
                }

                portfolioTable.innerHTML = `
                    <tr>
                        <td style="background-color: #fce4ec; width: 30%; font-weight: bold;">ìˆ˜ì • í¬íŠ¸í´ë¦¬ì˜¤ ë¹„ì¤‘</td>
                        <td style="text-align: left; padding-left: 30px;">
                            ğŸ”´ ì£¼ì‹(ETF): <strong style="font-size: 1.3em; color: ${sentiment === 'bullish' ? '#27ae60' : sentiment === 'bearish' ? '#c0392b' : '#2c3e50'};">${stockRatio}</strong><br>
                            ğŸ’° í˜„ê¸ˆ: <strong style="font-size: 1.3em; color: ${sentiment === 'bearish' ? '#27ae60' : sentiment === 'bullish' ? '#e67e22' : '#2c3e50'};">${cashRatio}</strong>
                            <div style="margin-top: 8px; font-size: 0.8em; color: #7f8c8d;">
                                (ì¡°ì • ê·¼ê±°: ${rationale})
                            </div>
                        </td>
                    </tr>
                `;
            }

            // === 3. REWRITE ACTION PLAN ===
            const actionUl = actionPlanBox.querySelector('ul');
            if (actionUl) {
                if (sentiment === "bearish") {
                    actionUl.innerHTML = `
                        <li><strong>ğŸš¨ ì¦‰ì‹œ ì‹¤í–‰ (ê¸´ê¸‰):</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ ë ˆë²„ë¦¬ì§€ ETF <strong>50% ì´ìƒ ë§¤ë„</strong> (ìµì ˆ/ì†ì ˆ ë¬´ê´€)<br>
                            &nbsp;&nbsp;&nbsp;â†’ í˜„ê¸ˆ ë¹„ì¤‘ <strong>${cashRatio}</strong>ê¹Œì§€ ì¦‰ì‹œ ì¦ì•¡<br>
                            &nbsp;&nbsp;&nbsp;â†’ ì¶”ê°€ í•˜ë½ ì‹œ ë‚˜ë¨¸ì§€ í¬ì§€ì…˜ë„ <strong>ë¬´ì¡°ê±´ ì²­ì‚°</strong></li>
                        <li><strong>ğŸ”» ì†ì ˆ ê¸°ì¤€ ê°•í™”:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ ê°œë³„ ì¢…ëª© <strong>-5%</strong> ë„ë‹¬ ì‹œ ì¦‰ì‹œ ì „ëŸ‰ ë§¤ë„ (ê¸°ì¡´ -7% ëŒ€ë¹„ ê°•í™”)<br>
                            &nbsp;&nbsp;&nbsp;â†’ ì‹œì¥ì´ ê·€í•˜ì˜ ì˜ˆìƒê³¼ ë‹¤ë¥´ê²Œ ì›€ì§ì´ë©´ <strong>ì˜ëª»ì„ ì¸ì •</strong>í•˜ê³  ë¹ ë¥´ê²Œ ì² ìˆ˜í•˜ì‹­ì‹œì˜¤</li>
                        <li><strong>â¸ï¸ ì‹ ê·œ ë§¤ìˆ˜ ê¸ˆì§€:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ ëª¨ë“  'ì €ê°€ ë§¤ìˆ˜' ì‹œê·¸ë„ì„ <strong>ë¬´ì‹œ</strong>í•˜ì‹­ì‹œì˜¤<br>
                            &nbsp;&nbsp;&nbsp;â†’ ë–¨ì–´ì§€ëŠ” ì¹¼ë‚ ì„ ì¡ìœ¼ë ¤ í•˜ì§€ ë§ˆì‹­ì‹œì˜¤</li>
                    `;
                    actionPlanBox.style.backgroundColor = "#ffcdd2";
                    actionPlanBox.style.borderColor = "#c62828";
                    actionPlanBox.style.borderWidth = "3px";

                } else if (sentiment === "bullish") {
                    actionUl.innerHTML = `
                        <li><strong>ğŸš€ ì ê·¹ ë§¤ìˆ˜ ì „ëµ:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ í˜„ê¸ˆ ë¹„ì¤‘ì„ <strong>${cashRatio}</strong>ê¹Œì§€ ì¶•ì†Œ, ì£¼ì‹ ë¹„ì¤‘ <strong>${stockRatio}</strong> í™•ëŒ€<br>
                            &nbsp;&nbsp;&nbsp;â†’ KODEX 200/KOSDAQ150 ë ˆë²„ë¦¬ì§€ <strong>2~3íšŒ ë¶„í•  ë§¤ìˆ˜</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ ë‹¨, í•œ ë²ˆì— ëª°ë¹µí•˜ì§€ ë§ê³  <strong>ì‹œê°„ ë¶„ì‚° í•„ìˆ˜</strong></li>
                        <li><strong>âš ï¸ ìƒìŠ¹ì¥ ë¦¬ìŠ¤í¬ ê´€ë¦¬:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ ì†ì ˆë¼ì¸ <strong>-7%</strong>ëŠ” ì—¬ì „íˆ ì—„ìˆ˜ (ê³¼ìš• ê¸ˆë¬¼)<br>
                            &nbsp;&nbsp;&nbsp;â†’ ê¸‰ë“± ì‹œ <strong>ì¼ë¶€ ìµì ˆ</strong>ë¡œ ì›ê¸ˆ íšŒìˆ˜ ì „ëµ ë³‘í–‰</li>
                        <li><strong>ğŸ“Š ê¸°ìˆ ì  ì§€í‘œ ëª¨ë‹ˆí„°ë§:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ RSI 70 ì´ìƒ ì§„ì… ì‹œ <strong>ì¶”ê°€ ë§¤ìˆ˜ ì¤‘ë‹¨</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ 20ì¼ ì´í‰ì„  ì´íƒˆ ì‹œ <strong>ì ˆë°˜ ì´ìƒ ì¦‰ì‹œ ë§¤ë„</strong></li>
                    `;
                    actionPlanBox.style.backgroundColor = "#c8e6c9";
                    actionPlanBox.style.borderColor = "#2e7d32";
                    actionPlanBox.style.borderWidth = "3px";

                } else {
                    actionUl.innerHTML = `
                        <li><strong>ğŸ”» ê°œë³„ ì¢…ëª© -7% í•˜ë½ ì‹œ:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ ì´ìœ  ë¶ˆë¬¸ <strong>"ë¬»ì§€ë§ˆ ì ˆë°˜ ë§¤ë„"</strong> í•˜ì‹­ì‹œì˜¤. ì†ì‹¤ì„ ëŠì–´ë‚´ëŠ” ê²ƒì´ ê³ ìˆ˜ì˜ ì²« ê±¸ìŒì…ë‹ˆë‹¤.</li>
                        <li><strong>ğŸ”» ê³„ì¢Œ ì „ì²´ -10% ì†ì‹¤ ì‹œ:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ ì‹œì¥ì´ í‹€ë¦° ê²ƒì´ ì•„ë‹ˆë¼ ë‚´ê°€ í‹€ë¦° ê²ƒì…ë‹ˆë‹¤. <strong>ì „ëŸ‰ í˜„ê¸ˆí™”</strong> í›„ ì—¬í–‰ì„ ë‹¤ë…€ì˜¤ì‹­ì‹œì˜¤.</li>
                        <li><strong>ğŸ”º ë‚´ì¼ 2% ì¶”ê°€ í•˜ë½ ì‹œ:</strong><br>
                            &nbsp;&nbsp;&nbsp;â†’ 'ì €ê°€ ë§¤ìˆ˜' ê¸°íšŒê°€ ì•„ë‹™ë‹ˆë‹¤. 'ë–¨ì–´ì§€ëŠ” ì¹¼ë‚ 'ì…ë‹ˆë‹¤. ë§¤ìˆ˜ ë²„íŠ¼ì—ì„œ ì†ì„ ë–¼ì‹­ì‹œì˜¤.</li>
                    `;
                    actionPlanBox.style.backgroundColor = "#fff3e0";
                    actionPlanBox.style.borderColor = "#e67e22";
                    actionPlanBox.style.borderWidth = "2px";
                }
            }

            // Visual feedback
            document.body.style.transition = "background-color 0.5s";
            const originalBg = document.body.style.backgroundColor;
            document.body.style.backgroundColor = sentiment === "bearish" ? "#ffe6e6" : sentiment === "bullish" ? "#e6f7e6" : "#f0f0f0";
            setTimeout(() => {
                document.body.style.backgroundColor = "#ecf0f1";
            }, 2000);
        }

        // Save Note & Update Report
        addBtn.addEventListener('click', () => {
            const text = noteInput.value.trim();
            if (!text) {
                alert("ë¶„ì„ ë‚´ìš©ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            const now = new Date().toLocaleString('ko-KR', { month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit' });
            const notes = JSON.parse(localStorage.getItem('vip_investor_notes') || '[]');

            notes.push({ text: text, time: now });
            localStorage.setItem('vip_investor_notes', JSON.stringify(notes));

            addNoteElement(text, now);
            updateReportView(text); // Trigger comprehensive rewrite

            noteInput.value = '';

            // Enhanced feedback
            alert("âœ… ë³´ê³ ì„œê°€ ê·€í•˜ì˜ ë¶„ì„ ì˜ê²¬ì— ë”°ë¼ ì „ë©´ ì¬ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në³€ê²½ëœ ë‚´ìš©:\nâ€¢ ì¢…í•© ê²°ë¡ \nâ€¢ í¬íŠ¸í´ë¦¬ì˜¤ ë¹„ì¤‘\nâ€¢ ì‹œë‚˜ë¦¬ì˜¤ë³„ í–‰ë™ ì§€ì¹¨");
        });

        // Initialize
        loadNotes();
    </script>

    <script>
        // Yahoo Finance Real-Time Data Integration
        let previousPrices = { kospi: null, kosdaq: null };

        async function fetchYahooFinance(symbol) {
            try {
                const url = `https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1m&range=1d`;
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error('Yahoo Finance API error');
                }

                const data = await response.json();
                return data.chart.result[0];
            } catch (error) {
                console.error('Error fetching Yahoo Finance data:', error);
                return null;
            }
        }

        function formatNumber(num) {
            if (!num) return '-';
            return num.toLocaleString('ko-KR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        function formatVolume(vol) {
            if (!vol) return '-';
            return (vol / 1000000).toFixed(1) + 'M';
        }

        async function updateStockPrice(symbol, elementId, indexName) {
            const data = await fetchYahooFinance(symbol);
            const element = document.getElementById(elementId);

            if (!data || !element) {
                element.querySelector('div:nth-child(2)').innerHTML = 'ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨';
                return;
            }

            try {
                const quote = data.meta;
                const currentPrice = quote.regularMarketPrice;
                const previousClose = quote.chartPreviousClose;
                const change = currentPrice - previousClose;
                const changePercent = (change / previousClose) * 100;
                const volume = data.timestamp ? data.indicators.quote[0].volume[data.indicators.quote[0].volume.length - 1] : 0;

                // Determine color based on change
                const changeColor = change >= 0 ? '#e74c3c' : '#3498db';
                const changeSymbol = change >= 0 ? 'â–²' : 'â–¼';
                const changeClass = change >= 0 ? 'price-up' : 'price-down';

                // Check if price changed for animation
                const priceKey = indexName.toLowerCase();
                const priceChanged = previousPrices[priceKey] !== null && previousPrices[priceKey] !== currentPrice;
                previousPrices[priceKey] = currentPrice;

                // Update DOM
                element.innerHTML = `
                    <div style="color: rgba(255,255,255,0.7); font-size: 14px; margin-bottom: 5px;">${indexName} (${symbol})</div>
                    <div class="${priceChanged ? changeClass : ''}" style="font-size: 32px; font-weight: bold; color: white; margin-bottom: 10px;">
                        ${formatNumber(currentPrice)}
                    </div>
                    <div style="font-size: 14px; color: ${changeColor}; font-weight: bold;">
                        ${changeSymbol} ${formatNumber(Math.abs(change))} (${changePercent >= 0 ? '+' : ''}${changePercent.toFixed(2)}%)
                    </div>
                    <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 8px;">
                        ê±°ë˜ëŸ‰: ${formatVolume(volume)}
                    </div>
                `;

                // Update timestamp
                const now = new Date();
                document.getElementById('update-time').textContent = now.toLocaleTimeString('ko-KR');

            } catch (error) {
                console.error('Error parsing data:', error);
                element.querySelector('div:nth-child(2)').innerHTML = 'íŒŒì‹± ì˜¤ë¥˜';
            }
        }

        async function updateAllPrices() {
            await Promise.all([
                updateStockPrice('^KS11', 'kospi-live', 'KOSPI'),
                updateStockPrice('^KQ11', 'kosdaq-live', 'KOSDAQ')
            ]);
        }

        // Initial load
        updateAllPrices();

        // Auto-refresh every 10 seconds
        setInterval(updateAllPrices, 10000);

        // Pause updates when page is not visible
        let updateInterval;
        document.addEventListener('visibilitychange', function () {
            if (document.hidden) {
                clearInterval(updateInterval);
            } else {
                updateAllPrices();
                updateInterval = setInterval(updateAllPrices, 10000);
            }
        });
    </script>

</body>

</html>